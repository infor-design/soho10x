<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <title>Infor Multi Select</title>
  <link rel="stylesheet" href="../Release/inforControlsCombined.css"/>

  <script src="../Release/jquery-1.11.1.min.js"></script>
  <script src="../Release/jquery-ui-1.10.4.custom.min.js"></script>
  <script src="../Release/inforControlsCombined.js"></script>
  <script src="js/multiselect.js"></script>

  <script>
    $(function () {

      $('#states-multi').multiselect({source: function (term, response) {
		var resp = getEmptyData(response);
      }}).on('change', function () {
        console.log('Changed to :' + $(this).val());
      });

	  $(".body").inforForm();

	  $("#enablecontrol").click(function()
		{
			$('#states-multi').multiselect("enable");
		});

		$("#disablecontrol").click(function()
		{
			$('#states-multi').multiselect("disable");
		});

		$("#getdata").click(function()
		{
			var resp = [];
			$.getJSON('http://www.randomtext.me/api/lorem/p-5/2', function(data)
			{
				var items = data.text_out.split('</p>');

				for (var index=0, len=items.length; index<len; index++)
				{
					var id = index.toString();
					var label = items[index].replace("<p>","");
					var selected = (index % 2) ? "selected" : undefined;

					if ($.trim(label).length > 0)
						resp.push({ id:id, value:id, label:label, selected:selected});
				}

				var elem = $("#states-multi");
				elem.empty();
				for (var i=0; i < resp.length; i++)
				{
					var opt = $('<option></option>').attr({value: resp[i].value, selected: resp[i]["selected"]}).html(resp[i].label);
					elem.append(opt);
					if (resp[i]["selected"])
						elem.multiselect('addTag', $(opt));
				}


			});
		});
    });

	function getEmptyData(response)
	{
		var resp = [];
		resp.push({id: "", value: "", label: ""});
		response(resp);
	}



  </script>

</head>
<body>
  <div class="inforSingleColumnLayout autoLabelWidth">
    <label for="states-multi" class="label">Multiple States</label>
    <select multiple id="states-multi" name="states" class="multiselect">
    </select>
	<br>
	<button type="button" class="inforFormButton" id="enablecontrol">Enable</button>
	<button type="button" class="inforFormButton" id="disablecontrol">Disable</button>
	<button type="button" class="inforFormButton" id="getdata">Get Data</button>

  </div>
</body>
</html>
