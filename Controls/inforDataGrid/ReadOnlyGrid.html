<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<meta charset="utf-8">

	<title>Infor DataGrid Sample </title>
	<link rel="stylesheet" href="../Release/inforControlsCombined.css"/>

	<script src="../Release/jquery-1.10.2.min.js"></script>
	<script src="../Release/jquery-ui-1.10.2.custom.min.js"></script>
	<script src="../Release/inforControlsCombined.js"></script>

	<script src="js/inforDataGrid.js"></script>
	<script src="js/sampleData.js"></script>

</head>

<body class="inforHidden">
	<div>
		<div class="inforToolbar">
			<button class="inforIconButton new" title="Click to add a new row" onclick="grid.addRow({ officeId: grid.getData().getMaxId()+ 1, city: 'New City', phone: '000-000-0000' })"><span></span></button>
			<button class="inforIconButton delete" title="Click to remove selected rows" onclick="deleteRows()"><span></span></button>
			<button class="inforIconButton save" type="submit" title="Click to remove selected rows" onclick="saveRows()"><span></span></button>
			<span class="inforToolbarSpacer"></span>
			<button class="inforIconButton first" title="First" ><span></span></button>
			<button class="inforIconButton previous" title="Previous" ><span></span></button>
			<button class="inforIconButton next" title="Next" ><span></span></button>
			<button class="inforIconButton last" title="Last" ><span></span></button>
			<span class="inforToolbarSpacer"></span>
		</div>
		<form id="gridForm">
			<div id="inforDataGrid"></div>
		</form>
	</div>

	<ul id="gridRightClickMenu" class="inforContextMenu">
		<li>
			<a href="#keys">Account Keys</a>
			<ul id="keysMenu" class="inforContextMenu">
				<li><a href="#keyBrowser">Accounting Key Browse</a></li>
				<li><a href="#copyKeys">Copy Accounting Key</a></li>
				<li class="disabled"><a href="#pasteKeys">Paste Accounting Key</a></li>
			</ul>
		</li>
		<li ><a href="#copyJournal">Copy Journal Live</a></li>
		<li class="separator"><a href="#"></a></li>
		<li><a href="#balanceJournal">Balance Journal</a></li>
		<li class="disabled"><a href="#checkFunds">Check Funds</a></li>
		<li><a href="#saveIncomplete">Save as Incomplete</a></li>
		<li class="separator"><a href="#"></a></li>
		<li><a href="#findNext">Find Next line in Error</a></li>
		<li><a href="#goto">Go To Line</a></li>
		<li class="separator"><a href="#"></a></li>
		<li>
			<a href="#editorOptions">Edit Options</a>
			<ul id="editOptionsMenu" class="inforContextMenu">
				<li><a href="#option1">Option 1</a></li>
				<li><a href="#option2">Option 2</a></li>
				<li><a href="#option3">Option 3</a></li>
				<li><a href="#option4">Option 4</a></li>
				<li><a href="#option5">Option 5</a></li>
				<li><a href="#option6">Option 6</a></li>
				<li><a href="#option7">Option 7</a></li>
				<li><a href="#option8">Option 8</a></li>
				<li><a href="#option9">Option 9</a></li>
				<li><a href="#option10">Option 10</a></li>
				<li><a href="#option11">Option 11</a></li>
				<li><a href="#option12">Option 12</a></li>
				<li><a href="#option13">Option 13</a></li>
				<li><a href="#option14">Option 14</a></li>
				<li><a href="#option15">Option 15</a></li>
				<li><a href="#option16">Option 16</a></li>
			</ul>
		</li>
		<li><a href="#review">Review Approval Status</a></li>
		<li  class="disabled"><a href="#directAdjustment">Direct Adjustment</a></li>
	</ul>

	<script>
		function saveRows() {
			$('#gridForm').submit();
		}

		function deleteRows() {
			$('body').inforMessageDialog({
						title: "Delete Rows",
						shortMessage: "Are you sure you want to delete the selected data?",
						detailedMessage: "In this example the rows will not really be deleted. This is just an example.",
						dialogType: "Confirmation",
						showTitleClose: false,
						buttons: [{
									text: Globalize.localize("Yes"),
									click: function() {
										grid.removeSelectedRows();
										$(this).inforDialog("close"); },
									isDefault: true
								},{
									text: Globalize.localize("No"),
									click: function() { $(this).inforDialog("close"); }
								},{
									text: Globalize.localize("Cancel"),
									click: function() { $(this).inforDialog("close"); }
								}]
					});

		}

		function testEditability(row, cell, value, columnDef, dataContext) {
		   return dataContext.city =="Spokane";
		}

		//Globalize.culture("ar-SA");
		//Define Your Columns for the Grid.
		var columns = [];
		columns.push({ id: "officeId", name: "Office Id", field: "officeId", width: 40, sortable: true, formatter: UneditableColumnFormatter });
		columns.push({ id: "city", name: "City", field: "city", width: 125, filterType: TextFilter, selectable: true});
		columns.push({ id: "phone", name: "Phone", field: "phone", width: 60, filterType: TextFilter });
		columns.push({ id: "addressLine1", name: "Address 1", field: "addressLine1", width: 140, formatter: TextCellFormatter, filterType: TextFilter });
		columns.push({ id: "addressLine2", name: "Address 2", field: "addressLine2", width: 140, formatter: TextCellFormatter, filterType: TextFilter});
		columns.push({ id: "state", name: "State", field: "state", filterType: TextFilter, editability: testEditability, formatter: LinkFormatter, toolTip: "Google State", linkOnClick: "callOnClick(this)", linkTarget: "_blank", sortable: true });
		columns.push({ id: "comments", name: "Comments", field: "comments", width: 140, longTextTooltip:  true, formatter: TextCellFormatter, filterType: TextFilter });
		columns.push({ id: "country", name: "Country", field: "country", filterType: TextFilter, width: 70, formatter: TextCellFormatter});
		columns.push({ id: "postalCode", name: "Postal Code", field: "postalCode", filterType: TextFilter, width: 60, formatter: TextCellFormatter });
		columns.push({ id: "territory", name: "Territory", field: "territory", filterType: TextFilter, width: 70, formatter: TextCellFormatter});
		columns.push({ id: "establishedDate", name: "Established", field: "establishedDate", width: 70 });
		columns.push({ id: "numberEmployees", name: "No. Employees", field: "numberEmployees", width: 50});
		columns.push({ id: "isLeedCertified", name: "Leed Cerification", field: "isLeedCertified", width: 50, minWidth:20, maxWidth:80, formatter:CheckboxCellFormatter});

		/* This Sample uses a flat JS Sample Data file. */
		var data = getSampleData([]);

		function notDrillable(row, cell, value, columnDef, dataContext) {
		   return dataContext.city == "Greensboro";
		}

		function callOnClick(control) {
			console.log(control);
		}

		var options = {
			columns: columns,
			idProperty:'officeId',
			editable: false,
			dataset: data,
			showFilter: false,
			enableCellRangeSelection: true,
			enableCellNavigation: true,	//so dbl click works.
			showCheckboxes: true,
			multiSelect: true,
			showFooter: false,
			showStatusIndicators: true,
			selectOnRowChange: false,
			drilldown: function() {
				alert('drill');
			}
		};
		var grid = $("#inforDataGrid").inforDataGrid(options);

		/*Add a Right Click Menu on a row.*/
		grid.onContextMenu.subscribe(function (e)
		{
			e.preventDefault();
			//hide previous menus
			$(".inforMenu").hide();
			var cell = grid.getCellFromEvent(e);

			$(this).inforContextMenu({
				menu: 'gridRightClickMenu',
				invokeMethod: 'immediate',
				event: e,
				srcElement: $(grid.getCellNode(cell.row, cell.cell))
			},
				function(action, el, pos) {
					alert('Action: ' + action + ' on row: ' + cell.row );
			});

			//select row
			grid.setSelectedRows([cell.row]);
		});

		//Add a Double Click Menu - needs editable: true. This is an edge case - use drill down or row selection
		grid.onDblClick.subscribe(function(e) {
			var cell = grid.getCellFromEvent(e);
			//We should have a styling for this...Checking into that...
			alert("Open an editor for row: " + cell.row);
		});

		$('body').removeClass('inforHidden');
	</script>
</body>
</html>