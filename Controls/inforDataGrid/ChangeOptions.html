<!DOCTYPE html>
<html>
<head>
	<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge'><![endif]-->
	<meta charset="utf-8">

	<title>Infor DataGrid : Change out the Source Data</title>
	<link rel="stylesheet" href="../Release/inforControlsCombined.css"/>

	<script src="../Release/jquery-3.6.0.min.js"></script>
	<script src="../Release/jquery-ui-1.10.4.custom.min.js"></script>
	<script src="../Release/inforControlsCombined.js"></script>

	<!--Redundent imports but allows me to change grid code without a recompile-->
	<script src="js/inforDataGrid.js"></script>

</head>
<body>
	<div>
		<div class="inforToolbar">
			<button id="submitButton" class="inforIconButton save" onclick="changeSource()" ><span></span></button>
		</div>
		<div id="inforDataGrid"></div>
	</div>

	<script>

		grid = null;
		columns = [];

		columns.push({ id: "cust1", name: "Cust1", field: "cust1", width: 80, hidden: true, editor: TextCellEditor, filterType: TextFilter, required: true});
		columns.push({ id: "cust2", name: "Cust2", field: "cust2", width: 80, editor: TextCellEditor, filterType: TextFilter});
		columns.push({ id: "cust3", name: "Cust3", field: "cust3", width: 80, editor: TextCellEditor, filterType: TextFilter});


		data = [];
		data.push({ rowid : '0', cust1: 'ABC', cust2: '123', cust3: 'A1'});
		data.push({ rowid : '1', cust1: 'ABC', cust2: '456', cust3: 'A1'});
		data.push({ rowid : '3', cust1: 'ABC', cust2: '789', cust3: 'A2'});
		data.push({ rowid : '4', cust1: 'DEF', cust2: '123', cust3: 'A2'});
		data.push({ rowid : '5', cust1: 'DEF', cust2: '789', cust3: 'A2'});
		data.push({ rowid : '6', cust1: 'GHI', cust2: '123', cust3: 'A3'});
		data.push({ rowid : '7', cust1: 'GHI', cust2: '456', cust3: 'A4'});
		data.push({ rowid : '8', cust1: 'GHI', cust2: '789', cust3: 'A5'});

		var options = {
			columns:columns,
			idProperty:'rowid',
			dataset: data,
			showFilter: true,
			showDrillDown: true,
			showFooter: true,
			forceFitColumns: false,
			showCheckboxes: true,
			savePersonalization: true,
			showSummaryRow: true
		};

		grid = $("#inforDataGrid").inforDataGrid(options);

		function changeSource() {
			var columns = [];

			columns.push({ id: "jan", name: "Jan", field: "jan", width: 80, headerCssClass: "alignHeaderRight", formatter: IntegerCellFormatter, hidden: true, editor: IntegerCellEditor, filterType: IntegerFilter});
			columns.push({ id: "feb", name: "Feb", field: "feb", width: 80, headerCssClass: "alignHeaderRight", formatter: IntegerCellFormatter, editor: IntegerCellEditor, filterType: IntegerFilter});
			columns.push({ id: "mar", name: "Mar", field: "mar", width: 80, headerCssClass: "alignHeaderRight", formatter: IntegerCellFormatter, editor: IntegerCellEditor, filterType: IntegerFilter});
			columns.push({ id: "apr", name: "Apr", field: "apr", width: 80, headerCssClass: "alignHeaderRight", formatter: IntegerCellFormatter, editor: IntegerCellEditor, filterType: IntegerFilter});
			columns.push({ id: "may", name: "May", field: "may", width: 80, headerCssClass: "alignHeaderRight", formatter: IntegerCellFormatter, editor: IntegerCellEditor, filterType: IntegerFilter});


			var data = [];
			data.push({ recno : '0', jan: 10, feb: null, mar: 10, apr: 5, may: 30});
			data.push({ recno : '1', jan: 10, feb: 20, mar: null, apr: 5, may: 30});
			data.push({ recno : '3', jan: 10, feb: null, mar: 10, apr: 5, may: 30});
			data.push({ recno : '4', jan: 10, feb: 20, mar: 10, apr: null, may: 30});
			data.push({ recno : '5', jan: 10, feb: 20, mar: 10, apr: null, may: 30});
			data.push({ recno : '6', jan: 10, feb: 20, mar: null, apr: 5});
			data.push({ recno : '7', jan: 10, feb: null, mar: 10, apr: 5, may: null});
			data.push({ recno : '8', jan: 10, feb: 20, mar: 0, apr: 0, may: null});

			var options = {
				columns: columns,
				idProperty:'recno',
				dataset: data,
				showFilter: true,
				showDrillDown: false,
				showFooter: false,
				forceFitColumns: true,
				showCheckboxes: true,
				showGridSettings:true,
				savePersonalization: false,
				showSummaryRow: false
			};

			grid.setOptions(options);
			grid.setColumns(columns);
			grid.updateData(data);
		}
	</script>
</body>
</html>
